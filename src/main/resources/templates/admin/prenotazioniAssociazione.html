      
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Prenotazioni per <span th:text="${associazione.nome}">Associazione</span></title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" />
		  <link rel="stylesheet" th:href="@{/css/navbarStyle.css}" />
</head>
<body>
	<div th:replace="~{fragments/navbar :: navbar}"></div>
    <h1>Prenotazioni per: <span th:text="${associazione.nome}">Nome Associazione</span></h1>

    <!-- FORM PER I FILTRI -->
    <form th:action="@{/admin/associazione/{idA}/prenotazioni(idA=${associazione.id})}" method="get">
        <label for="dataFiltro">Filtra per Data:</label>
        <input type="date" id="dataFiltro" name="dataFiltro" th:value="${dataFiltroAttuale}">

 
		
		<label for="sportFiltro">Filtra per Sport:</label>
		       <select id="sportFiltro" name="sportIdFiltro">
		           <option value="">-- Tutti gli sport --</option>
		           <option th:each="sport : ${sportDellAssociazione}"
		                   th:value="${sport.id}"
		                   th:text="${sport.nome}"
		                   th:selected="${sportIdFiltroAttuale != null and sport.id == sportIdFiltroAttuale}">
		           </option>
		       </select>
  
	
		    <!-- Mostra il filtro per campo solo se ci sono campi da mostrare -->
		    <div th:if="${campiDellAssociazione != null}">
		        <label for="campoFiltro">Filtra per Campo:</label>
		        <select id="campoFiltro" name="campoIdFiltro">
		            <option value="">-- Tutti i Campi --</option>
		            <option th:each="campo : ${campiDellAssociazione}"
		                    th:value="${campo.id}"
		                    th:text="${campo.nome}"
		                    th:selected="${campoIdFiltroAttuale != null and campo.id == campoIdFiltroAttuale}">
		            </option>
		        </select>
		    </div>

		    <button type="submit">Filtra</button>
		    <a th:href="@{/admin/associazione/{idA}/prenotazioni(idA=${associazione.id})}">Resetta</a>
		</form>
    </form>
    <hr/>

    <!-- TABELLA DELLE PRENOTAZIONI -->
    <table border="1">
        <thead>
            <tr>
				<th>Dettagli</th>
                <th>Data</th>
                <th>Orario</th>
                <th>Campo</th>
                <th>Sport</th>
                <th>Cliente</th>
                <th>Nome e Cognome</th>
				<th>Azioni</th>
            </tr>
        </thead>
        <tbody>
            <tr th:if="${prenotazioni.isEmpty()}">
                <td colspan="6">Nessuna prenotazione trovata con i filtri selezionati.</td>
            </tr>
            <tr th:each="prenotazione : ${prenotazioni}">
				<td>
				                   <a th:href="@{/admin/associazione/{idA}/prenotazioni/{idP}(idA=${associazione.id}, idP=${prenotazione.id})}">
				                       Dettagli
				                   </a>
                <td th:text="${#temporals.format(prenotazione.data, 'dd/MM/yyyy')}"></td>
                <td th:text="${#temporals.format(prenotazione.oraInizio, 'HH:mm')} + ' - ' + ${#temporals.format(prenotazione.oraFine, 'HH:mm')}"></td>
                <td th:text="${prenotazione.campo.nome}"></td>
                <td th:text="${prenotazione.campo.sport.nome}"></td>
                <td th:text="${prenotazione.cliente.credentials.username}"></td>
                <td th:text="${prenotazione.cliente.name} + ' ' + ${prenotazione.cliente.surname}"></td>
				<td ><a th:href="@{/admin/associazione/{idA}/prenotazioni/cancella/{idP}(idA=${associazione.id},idP=${prenotazione.id})}">	elimina</a></td>
            </tr>
        </tbody>
    </table>
	
    <br/>
    <a href="/">Torna alla Home</a>
</body>
</html>

    