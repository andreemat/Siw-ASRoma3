<!DOCTYPE html>
<html>

<head>
	<title>
		SiwMovie - Registrazione
	</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" 
	        rel="stylesheet" 
	        xintegrity="sha384-LN+7fdVzj6u52u30Kp6M/trliBMCMKTyK833zpbD+pXdCLuTusPj697FH4R/5mcr" 
	        crossorigin="anonymous" />

	<link rel="stylesheet" th:href="@{/css/formStyle.css}"/>
	<link rel="stylesheet" th:href="@{/css/navbarStyle.css}"/>
</head>

<body class ="background-custom">
	<div th:replace="~{fragments/navbar :: navbar}"></div>
	<header>
		<div th:if="${userDetails}">
			<span th:text="${userDetails.username}"></span>
			<a href="/logout">Logout</a>
		</div>
		<div th:unless="${user}">
			<a href="/login">Login</a>
		</div>
	</header>

	<div class="container my-5 container-custom" style="max-width: 1000px;">
	    <div class="card shadow-sm">
	        <div class="card-body p-4">
	            <h2>Registrazione nuovo utente</h2>
	            <form th:action="@{/register}" method="POST">
	                
	                <!-- Campo Nome -->
	                <div class="row mb-3">
	                    <label for="name" class="col-sm-2 col-form-label">Nome</label>
	                    <div class="col-sm-10">
	                        <input type="text" id="name" placeholder="name" required th:field="${user.name}" class="form-control" /> 
	                        <span th:if="${#fields.hasErrors('user.name')}" th:errors="${user.name}" class="text-danger"></span>
	                    </div>
	                </div>

	                <!-- Campo Cognome -->
	                <div class="row mb-3">
	                    <label for="surname" class="col-sm-2 col-form-label label-form" >Cognome</label>
	                    <div class="col-sm-10">
	                        <input type="text" id="surname" placeholder="surname" required th:field="${user.surname}" class="form-control" />
	                        <span th:if="${#fields.hasErrors('user.surname')}" th:errors="${user.surname}" class="text-danger"></span>
	                    </div>
	                </div>

	                <!-- Campo Email -->
	                <div class="row mb-3">
	                    <label for="email" class="col-sm-2 col-form-label">Email</label>
	                    <div class="col-sm-10">
	                        <input type="text" id="email" placeholder="email" th:field="${user.email}" class="form-control" />
	                        <span th:if="${#fields.hasErrors('user.email')}" th:errors="${user.email}" class="text-danger"></span>
	                    </div>
	                </div>

	                <!-- Campo Username -->
	                <div class="row mb-3">
	                    <label for="username" class="col-sm-2 col-form-label">Username</label>
	                    <div class="col-sm-10">
	                        <input type="text" id="username" placeholder="username" required th:field="${credentials.username}" class="form-control" />
	                        <span th:if="${#fields.hasErrors('credentials.username')}" th:errors="${credentials.username}" class="text-danger"></span>
	                    </div>
	                </div>

	                <!-- Campo Password -->
	                <div class="row mb-3">
	                    <label for="password" class="col-sm-2 col-form-label">Password</label>
	                    <div class="col-sm-10">
	                        <input type="password" id="password" placeholder="password" required th:field="${credentials.password}" class="form-control" />
	                        <span th:if="${#fields.hasErrors('credentials.password')}" th:errors="${credentials.password}" class="text-danger"></span>
	                    </div>
	                </div>

	                <!-- Campo Città -->
	                <div class="row mb-3">
	                    <label for="citta-select" class="col-sm-2 col-form-label">Seleziona una città:</label>
	                    <div class="col-sm-10">
	                        <select id="citta-select" th:field="${user.citta}" class="form-select">
	                            <option value="">-- Seleziona una città --</option>
	                            <option th:each="cit : ${citta}"
	                                    th:value="${cit.id}"
	                                    th:text="${cit.nome}">Città Nome</option>
	                        </select>
	                        <span th:if="${#fields.hasErrors('user.citta')}" th:errors="${user.citta}" class="text-danger"></span>
	                    </div>
	                </div>
	                
	                <!-- Bottone Registra -->
	                <button type="submit" class="btn btn-custom w-100">Registra</button>
	            </form>
	        </div>
	    </div>
	</div>
</body>
</html>
